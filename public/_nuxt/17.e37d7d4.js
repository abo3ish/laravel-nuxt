(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{212:function(e,t,r){"use strict";r.r(t);r(30);var n=r(10),o=r(47),d=r.n(o),c=r(316),l=r(186),v=r(319),_={layout:"admin",middleware:"auth",head:function(){return{title:this.order.uuid}},components:{LabelInputText:c.a,HeaderInfo:v.a,Loading:l.default},data:function(){return{nameState:!1,serviceProviderTypes:[],order:{id:"",uuid:"",user:{},status:{},area:{},address:"",type:"",services:[],drugs:[],service_provider:{},service_provider_type:{},prices:{}},serviceProviderOptions:[],drugOptions:[],statusOptions:[],form:new d.a({service_provider_id:"",status:"",price_to_pay:""}),drugsFields:["name","price_to_pay","quantity"],drugOrder:{drug_id:"",quantity:""}}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:e.fetchOrderStatuses();case 3:case"end":return t.stop()}}),t)})))()},methods:{sayHi:function(){console.log("modal")},sayNo:function(){console.log("no")},fetchData:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("orders/"+e.$route.params.id).then((function(t){e.form.service_provider_id=t.service_provider?t.service_provider.id:null,e.form.price_to_pay=t.prices.price_to_pay,e.form.status=t.status.code,e.order=t,e.statusOptions.push(t.status),t.service_provider?e.serviceProviderOptions.push(t.service_provider):e.searchForServiceProviders("",e.order.service_provider_type.id,e.order.area.id)}));case 2:case"end":return t.stop()}}),t)})))()},update:function(){var e=this;this.form.put("/orders/"+this.$route.params.id,this.form).then((function(t){e.order=t.data})),this.$notify({group:"feedback",title:this.$t("service_provider_updated_sucessfully"),type:"success"})},fetchOrderStatuses:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("order-statuses").then((function(t){e.statusOptions=t}));case 2:case"end":return t.stop()}}),t)})))()},fetchServiceProviderOptions:function(e,t){var r=this;0!==e.length&&(t(!0),setTimeout((function(){r.searchForServiceProviders(e,r.order.service_provider_type.id,r.order.area.id),t(!1)}),300))},searchForServiceProviders:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"",o=e.length>1&&void 0!==e[1]?e[1]:null,d=e.length>2&&void 0!==e[2]?e[2]:null,r.next=5,t.$axios.$get("service-providers",{params:{name:n,type_id:o,area_id:d}}).then((function(e){t.serviceProviderOptions=e.data}));case 5:case"end":return r.stop()}}),r)})))()},fetchDrugOptions:function(e,t){var r=this;0!==e.length&&(t(!0),setTimeout((function(){r.searchForDrugs(e),t(!1)}),300))},searchForDrugs:function(){var e=arguments,t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"",r.next=3,t.$axios.$get("drugs",{params:{name:n}}).then((function(e){t.drugOptions=e.drugs}));case 3:case"end":return r.stop()}}),r)})))()},StoreDrugOrder:function(){this.$refs.form.checkValidity()&&(this.drugOrder.order_id=this.order.id,this.$axios.$post("drug-order",this.drugOrder).then((function(e){console.log(e)})))},handleOk:function(e){e.preventDefault(),this.StoreDrugOrder()}}},f=(r(342),r(12)),component=Object(f.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.order.id?e._e():r("loading"),e._v(" "),r("header-info",{attrs:{name:"orders",navigation:[{name:"home",link:"dashboard"},{name:"orders",link:"orders"},{name:e.order.uuid,link:"",trans:!1}]}}),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"card card-primary"},[r("div",{staticClass:"card-header"},[r("h3",{staticClass:"card-title"},[r("n-link",{attrs:{to:{name:"create-order"}}},[r("button",{staticClass:"btn btn-outline-light float-left"},[e._v("\n                "+e._s(e.$t("add_new"))+"\n              ")])])],1)]),e._v(" "),r("form",{attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),e.update()}}},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"balance"}},[e._v(e._s(e.$t("user"))+" : ")]),e._v(" "),r("code",[e._v("\n                "+e._s(e.order.user.name)+" "),r("br")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"balance"}},[e._v(e._s(e.$t("type"))+" : ")]),e._v(" "),r("code",[e._v("\n                "+e._s(e.order.type)+"\n              ")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"orders"}},[e._v(e._s(e.$t("orders"))+" : ")]),e._v(" "),e._l(e.order.services,(function(t){return r("b-badge",{key:t.id,staticClass:"p-2 m-2 w-30",attrs:{pill:"",variant:"primary"}},[e._v("\n                "+e._s(t.title)+"\n              ")])})),e._v(" "),e._l(e.order.drugs,(function(t){return r("b-badge",{key:t.id,attrs:{pill:"",variant:"info"}},[e._v("\n                "+e._s(t.name)+"\n              ")])}))],2),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"balance"}},[e._v(e._s(e.$t("status"))+" : ")]),e._v(" "),r("code",[e._v("\n                "+e._s(e.order.status.string)+" "),r("br")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"balance"}},[e._v(e._s(e.$t("service_provider_type"))+" : ")]),e._v(" "),r("code",[e._v("\n                "+e._s(e.order.service_provider_type.title)+" "),r("br")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"balance"}},[e._v(e._s(e.$t("service_provider"))+" : ")]),e._v(" "),r("code",[e._v("\n                "+e._s(e.order.service_provider?e.order.service_provider.name:e.$t("not_assigned"))+" "),r("br")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"balance"}},[e._v(e._s(e.$t("address"))+" : ")]),e._v(" "),r("code",{attrs:{id:"address"}},[e._v("\n                "+e._s(e.order.address)+" "),r("br")])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"balance"}},[e._v(e._s(e.$t("area"))+" : ")]),e._v(" "),r("code",{attrs:{id:"area"}},[e._v("\n                "+e._s(e.order.area.name)+" "),r("br")])]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.update()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{id:"service-provider"}},[e._v(e._s(e.$t("service_provider")))]),e._v(" "),r("v-select",{attrs:{options:e.serviceProviderOptions,filterable:!1,reduce:function(e){return e.id},label:"name"},on:{search:e.fetchServiceProviderOptions},scopedSlots:e._u([{key:"option",fn:function(t){var n=t.name;return[r("div",{staticClass:"d-center"},[e._v("\n                      "+e._s(n)+"\n                      "),r("img",{attrs:{src:"https://via.placeholder.com/40/40"}})])]}},{key:"selected-option",fn:function(t){var n=t.name;return[r("div",{staticClass:"selected d-center"},[r("strong",[e._v("\n                        "+e._s(n)+"\n                      ")]),e._v(" "),r("img",{attrs:{src:"https://via.placeholder.com/40/40"}}),e._v(" "),r("span")])]}}]),model:{value:e.form.service_provider_id,callback:function(t){e.$set(e.form,"service_provider_id",t)},expression:"form.service_provider_id"}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{id:"status"}},[e._v(e._s(e.$t("status")))]),e._v(" "),r("v-select",{attrs:{options:e.statusOptions,filterable:!1,reduce:function(e){return e.code},label:"code"},scopedSlots:e._u([{key:"option",fn:function(t){var n=t.string;return[r("div",{staticClass:"d-center"},[e._v("\n                      "+e._s(n)+"\n                    ")])]}},{key:"selected-option",fn:function(t){var n=t.string;return[r("div",{staticClass:"selected d-center"},[r("strong",[e._v("\n                        "+e._s(n)+"\n                      ")]),e._v(" "),r("span")])]}}]),model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),e._v(" "),r("div",{staticClass:"card-footer"},[r("v-button",{attrs:{loading:e.form.busy,type:"success"}},[e._v("\n                  "+e._s(e.$t("save"))+"\n                ")])],1)])])])]),e._v(" "),"pharmacy"==e.order.type?r("div",{staticClass:"card card-primary"},[r("div",{staticClass:"card card-header"},[r("div",{staticClass:"card-title"},[e._v("\n            Drugs\n            "),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticClass:"btn btn-outline-light float-left",attrs:{variant:"primary"}},[e._v("\n              "+e._s(e.$t("add_new"))+"\n            ")]),e._v(" "),r("b-modal",{attrs:{id:"modal-center",size:"lg",centered:"",state:e.nameState,title:"منتج جديد","ok-title":"اضف","cancel-title":"اغلق"},on:{ok:e.handleOk}},[r("form",{ref:"form",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.StoreDrugOrder(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{id:"drug"}},[e._v(e._s(e.$t("drug")))]),e._v(" "),r("v-select",{attrs:{options:e.drugOptions,filterable:!1,reduce:function(e){return e.id},label:"name"},on:{search:e.fetchDrugOptions},scopedSlots:e._u([{key:"option",fn:function(t){var n=t.name,image=t.image;return[r("div",{staticClass:"d-center"},[e._v("\n                        "+e._s(n)+"\n                        "),r("img",{attrs:{src:image,height:"70",width:"70"}})])]}},{key:"selected-option",fn:function(t){var n=t.name,image=t.image;return[r("div",{staticClass:"selected d-center"},[r("strong",[e._v("\n                          "+e._s(n)+"\n                        ")]),e._v(" "),r("img",{attrs:{src:image,height:"70",width:"70"}}),e._v(" "),r("span")])]}}],null,!1,1257042365),model:{value:e.drugOrder.drug_id,callback:function(t){e.$set(e.drugOrder,"drug_id",t)},expression:"drugOrder.drug_id"}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("LabelInputText",{attrs:{label:e.$t("quantity"),type:"number",name:"quantity",required:!0},model:{value:e.drugOrder.quantity,callback:function(t){e.$set(e.drugOrder,"quantity",t)},expression:"drugOrder.quantity"}})],1)])])],1)]),e._v(" "),r("div",{staticClass:"card card-body"},[r("b-table",{attrs:{items:e.order.drugs,fields:e.drugsFields,"show-empty":""}})],1)]):e._e()])])],1)}),[],!1,null,"07df45f4",null);t.default=component.exports},316:function(e,t,r){"use strict";r(11),r(9);var n={name:"LabelInputText",props:{label:{required:!1,default:"",type:String},value:{required:!1,type:[String,Number],default:""},type:{required:!0,default:"text",type:String},placeholder:{required:!1,default:"",type:String},name:{required:!0,type:String},required:{required:!1,default:!1,type:Boolean}},computed:{idName:function(){return this.label.toLowerCase().replace(" ","-")+"-"+Math.floor(100*Math.random())}},methods:{updateValue:function(e){this.$emit("input",e)}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group"},[e.label?r("label",{staticClass:"col-form-label",attrs:{for:e.idName}},[e._v(e._s(e.label))]):e._e(),e._v(" "),r("div",{staticClass:"input-group mb-3"},[r("input",{staticClass:"form-control",attrs:{id:e.idName,name:e.name,type:e.type,placeholder:e.placeholder,required:e.required},domProps:{value:e.value},on:{input:function(t){return e.updateValue(t.target.value)}}})])])}),[],!1,null,null,null);t.a=component.exports},319:function(e,t,r){"use strict";var n={name:"HeaderInfo",props:{name:{required:!1,default:"",type:String},navigation:{required:!1,default:"",type:[Array,String]}}},o=r(12),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"content-header"},[r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"row mb-2"},[r("div",{staticClass:"col-sm-6"},[r("h1",[e._v(e._s(e.$t(e.name)))])]),e._v(" "),r("div",{staticClass:"col-sm-6"},[r("ol",{staticClass:"breadcrumb float-sm-left"},e._l(e.navigation,(function(t){return r("li",{key:t.name,staticClass:"breadcrumb-item",class:t.link?"active":""},[t.link?r("nuxt-link",{attrs:{to:{name:t.link}}},[e._v("\n              "+e._s(e.$t(t.name))+"\n            ")]):r("span",[e._v("\n              "+e._s(!1===t.trans?t.name:e.$t(t.name))+"\n            ")])],1)})),0)])])])])}),[],!1,null,null,null);t.a=component.exports},329:function(e,t,r){},342:function(e,t,r){"use strict";var n=r(329);r.n(n).a}}]);