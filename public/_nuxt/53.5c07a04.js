(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{222:function(r,e,t){"use strict";t.r(e);t(29);var d=t(10),o={layout:"admin",middleware:"auth",head:function(){return{title:this.order.uuid}},data:function(){return{loading:!0,order:{id:"",uuid:"",user:{},address:{},type:"",status:{},services:{},drugs:{},attachments:[],prices:{},profits:{},created_at:"",is_collected:"",service_provider_type:"",service_provider:{},audio:"",dates:{}},servicesFields:["title","service_provider_type","estimated_price","price_to_pay","discount_price","discount"],drugsFields:["name","price","price_to_pay","discount_price","discount"]}},mounted:function(){this.fetchOrder()},methods:{fetchOrder:function(){var r=this;this.$axios.$get("/orders/"+this.$route.params.id).then((function(e){r.order=e})),this.loading=!1},playAudio:function(r){r.loading=!0,r.rowFile||this.loadFile(r)},pauseAudio:function(r){r.loading=!0,r.audio&&r.audio.pause()},loadFile:function(r){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/attachments/"+r.id,{responseType:"blob"}).then((function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){r.rowFile=t.result,r.loading=!1,r.ready=!0}}));case 2:case"end":return t.stop()}}),t)})))()}}},n=t(12),component=Object(n.a)(o,(function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[r.loading?t("loading"):r._e(),r._v(" "),t("header-info",{attrs:{name:"orders",navigation:[{name:"home",link:"dashboard"},{name:"orders",link:"orders"},{name:r.order.uuid,link:"",trans:!1}]}}),r._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"card card-primary"},[t("div",{staticClass:"card-header"},[t("h3",{staticClass:"card-title"},[r._v("\n            "+r._s(r.order.user.name+" - "+r.order.type+" - "+r.order.status.string)+"\n            "),t("n-link",{attrs:{to:{name:"edit-order"}}},[t("button",{staticClass:"btn btn-outline-light float-left"},[r._v("\n                "+r._s(r.$t("edit"))+"\n              ")])])],1)]),r._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"type"}},[r._v(r._s(r.$t("order_type"))+" : ")]),r._v(" "),t("code",{staticClass:"badge badge-info"},[r._v("\n              "+r._s(r.order.type)+" "),t("br")])]),r._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"type"}},[r._v(r._s(r.$t("order_number"))+" : ")]),r._v(" "),t("code",{staticClass:"badge badge-danger"},[r._v("\n              "+r._s(r.order.uuid)+" "),t("br")])]),r._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"user"}},[r._v(r._s(r.$t("user"))+" : ")]),r._v(" "),t("code",[r.order.user?t("nuxt-link",{attrs:{to:{name:"show-user",params:{id:r.order.user.id}}}},[r._v("\n                "+r._s(r.order.user.name)+"\n              ")]):r._e(),r._v(" "),t("br")],1)]),r._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"phone"}},[r._v(r._s(r.$t("phone"))+" : ")]),r._v(" "),t("code",[r._v("\n              "+r._s(r.order.user.phone)+"\n            ")])]),r._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"status"}},[r._v(r._s(r.$t("status"))+" : ")]),r._v(" "),t("code",[r._v("\n              "+r._s(r.order.status.string)+" "),t("br")])]),r._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"area"}},[r._v(r._s(r.$t("area"))+" : ")]),r._v(" "),t("code",{attrs:{id:"area"}},[r._v("\n              "+r._s(r.order.address.area)+"\n            ")]),r._v("\n            ||\n            "),t("label",{attrs:{for:"street"}},[r._v(r._s(r.$t("street"))+" : ")]),r._v(" "),t("code",{attrs:{id:"street",dir:"rtl"}},[r._v("\n              "+r._s(r.order.address.street)+"\n            ")]),r._v("\n            ||\n            "),t("label",{attrs:{for:"building_number"}},[r._v(r._s(r.$t("building_number"))+" : ")]),r._v(" "),t("code",{attrs:{id:"building_number"}},[r._v("\n              "+r._s(r.order.address.building_number)+"\n            ")]),r._v("\n            ||\n            "),t("label",{attrs:{for:"floor_number"}},[r._v(r._s(r.$t("floor_number"))+" : ")]),r._v(" "),t("code",{attrs:{id:"floor_number"}},[r._v("\n              "+r._s(r.order.address.floor_number)+"\n            ")]),r._v("\n            ||\n            "),t("label",{attrs:{for:"flat_number"}},[r._v(r._s(r.$t("flat_number"))+" : ")]),r._v(" "),t("code",{attrs:{id:"flat_number"}},[r._v("\n              "+r._s(r.order.address.flat_number)+"\n            ")]),r._v("\n            ||\n            "),t("a",{attrs:{href:"https://www.google.com/maps/search/?api=1&query="+r.order.address.lat+","+r.order.address.lat,target:"_blank"}},[r._v("\n              افتح علي الخريطة\n            ")])]),r._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"service_provider"}},[r._v(r._s(r.$t("service_provider"))+" : ")]),r._v(" "),t("code",{attrs:{id:"service_provider"}},[r.order.service_provider?t("nuxt-link",{attrs:{to:{name:"show-service-provider",params:{id:r.order.service_provider.id}}}},[r._v("\n                "+r._s(r.order.service_provider.name)+"\n              ")]):t("span",[r._v(r._s(r.$t("service_provider_not_assigned")))]),r._v(" "),t("br")],1)]),r._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"is_collected"}},[r._v(r._s(r.$t("is_collected"))+" : ")]),r._v(" "),t("code",{attrs:{id:"is_collected"}},[r._v("\n              "+r._s(r.order.is_collected?r.$t("order_collected"):r.$t("order_not_collected"))+" "),t("br")])]),r._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-3"},[t("table",{staticClass:"table table-responsive table-hover"},r._l(Object.keys(r.order.prices),(function(e){return t("tr",{key:e.id},[t("th",[r._v(r._s(r.$t(e)))]),r._v(" "),t("td",[r._v(r._s(r.order.prices[e]))])])})),0)]),r._v(" "),t("div",{staticClass:"col-3"},[t("table",{staticClass:"table table-responsive table-hover"},r._l(Object.keys(r.order.profits),(function(e){return t("tr",{key:e.id},[t("th",[r._v(r._s(r.$t(e)))]),r._v(" "),t("td",[r._v(r._s(r.order.profits[e]))])])})),0)]),r._v(" "),t("div",{staticClass:"col-6"},[t("table",{staticClass:"table table-striped table-responsive table-hover"},r._l(Object.keys(r.order.dates),(function(e){return t("tr",{key:e.id},[t("th",[r._v(r._s(r.$t(e)))]),r._v(" "),t("td",[r._v(r._s(r.order.dates[e]?r.$moment(String(r.order.dates[e]),"YYYY-MM-DD hh:mm:ss").format("LLLL"):""))])])})),0)])])])]),r._v(" "),r.order.services.length?t("div",{staticClass:"card card-primary"},[t("div",{staticClass:"card card-header"},[r._v("\n          Services\n        ")]),r._v(" "),t("div",{staticClass:"card card-body"},[t("b-table",{attrs:{items:r.order.services,fields:r.servicesFields,"show-empty":""}})],1)]):r._e(),r._v(" "),r.order.drugs.length?t("div",{staticClass:"card card-primary"},[t("div",{staticClass:"card card-header"},[r._v("\n          Products\n        ")]),r._v(" "),t("div",{staticClass:"card card-body"},[t("b-table",{attrs:{items:r.order.drugs,fields:r.drugsFields,"show-empty":""}})],1)]):r._e(),r._v(" "),r._l(r.order.attachments,(function(e){return t("div",{key:e.id,staticClass:"card card-indigo"},[e.ready?r._e():t("b-button",{attrs:{variant:"primary"},on:{click:function(t){return r.loadFile(e)}}},[e.loading?t("b-spinner",{attrs:{small:""}}):r._e(),r._v(" Load File\n        ")],1),r._v(" "),"audio"==e.type&&""!=e.rowFile?t("vue-plyr",[t("audio",[t("source",{attrs:{src:e.rowFile,type:e.mime}})])]):r._e(),r._v(" "),"text"==e.type||"image"==e.type?t("b-card-img",{attrs:{src:e.rowFile,thumbnail:"",fluid:""}}):r._e()],1)}))],2)])],1)}),[],!1,null,null,null);e.default=component.exports}}]);